<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Atendimento VIP - V√≠deo Chamada</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-1:#0a0f2c;
      --bg-2:#0f1550;
      --accent:#1e4bff;
      --accent-2:#00d4ff;
      --glass: rgba(20,35,120,0.55);
      --neon-shadow: 0 6px 30px rgba(30,75,255,0.18), 0 0 40px rgba(30,75,255,0.06) inset;
      --card: rgba(255,255,255,0.03);
      --muted: rgba(255,255,255,0.7);
      --max-width:420px;
    }

    *{ box-sizing:border-box }
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(135deg,var(--bg-1),#11173d);
      font-family:'Poppins',sans-serif;
      color:white;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding:28px 16px;
      min-height:100vh;
      -webkit-font-smoothing:antialiased;
    }

    /* HEADER */
    .top-header{
      position:fixed;
      top:0; left:0;
      width:100%;
      z-index:9999;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:12px 18px;
      background:linear-gradient(180deg,rgba(12,20,60,0.72),rgba(6,10,30,0.30));
      backdrop-filter:blur(8px);
      border-bottom:1px solid rgba(30,75,255,0.08);
      box-shadow:0 8px 40px rgba(5,8,25,0.6);
    }

    .logo-header{
      height:56px;
      border-radius:14px;
      max-width:260px;
      object-fit:cover;
      background:rgba(255,255,255,0.03);
      padding:6px;
      border:1px solid rgba(255,255,255,0.05);
      box-shadow:0 6px 20px rgba(30,75,255,0.14);
    }

    .badge{
      padding:8px 12px;
      border-radius:999px;
      background:rgba(30,75,255,0.14);
      border:1px solid rgba(30,75,255,0.09);
      font-size:13px;
      color:var(--muted);
    }

    .page-wrap{
      width:100%;
      max-width:var(--max-width);
      margin-top:100px;
    }

    .container{
      width:100%;
      padding:22px;
      background:rgba(255,255,255,0.02);
      border-radius:20px;
      border:1px solid rgba(30,75,255,0.06);
      box-shadow:var(--neon-shadow);
      text-align:center;
    }

    .profile-image{
      width:128px; height:128px;
      border-radius:50%;
      border: 4px solid rgba(30,75,255,0.16);
      background-size:cover;
      background-position:center;
      margin:12px auto;
      box-shadow:0 8px 30px rgba(30,75,255,0.16);
    }

    /* ONLINE BOX */
    #onlineBox{
      margin:0 auto 15px;
      padding:10px 14px;
      width:fit-content;
      border-radius:12px;
      background:rgba(0,140,255,0.12);
      border:1px solid rgba(0,140,255,0.25);
      font-size:14px;
      box-shadow:0 0 12px rgba(0,140,255,0.25);
      backdrop-filter:blur(6px);
    }

    /* BUTTON PULSANTE */
    .btn-primary{
      width:100%;
      background:linear-gradient(90deg,#1e4bff,#003bff);
      padding:18px 20px;
      font-size:20px;
      font-weight:800;
      border:none;
      border-radius:16px;
      color:white;
      cursor:pointer;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;

      box-shadow:
        0 0 25px rgba(30,75,255,0.8),
        0 0 55px rgba(0,140,255,0.5),
        inset 0 0 18px rgba(255,255,255,0.22);

      animation:pulsar 1.4s infinite ease-in-out;
      transition:.2s;
    }

    @keyframes pulsar{
      0%{ transform:scale(1); box-shadow:0 0 20px rgba(30,75,255,0.7);}
      50%{ transform:scale(1.06); box-shadow:0 0 45px rgba(30,75,255,1);}
      100%{ transform:scale(1); box-shadow:0 0 20px rgba(30,75,255,0.7);}
    }

    /* PHONE SECTION (inline form if needed) */
    .phone-section{
      display:none;
      margin-top:18px;
      padding:18px;
      border-radius:14px;
      background: linear-gradient(180deg, rgba(10,15,44,0.6), rgba(6,8,30,0.45));
      border:1px solid rgba(30,75,255,0.07);
    }
    .phone-input{
      width:100%;
      padding:14px;
      border-radius:12px;
      border:2px solid rgba(30,75,255,0.16);
      background: rgba(10,15,44,0.65);
      color:white;
      font-size:15px;
      margin-bottom:12px;
      outline:none;
      text-align:center;
    }
    .phone-input:focus{ box-shadow: 0 6px 28px rgba(30,75,255,0.06); border-color:var(--accent); }

    /* POPUPS DE COMPRA */
    #comprasPopupContainer{
      position:fixed;
      bottom:20px;
      left:20px;
      z-index:3000;
    }

    .compra-popup{
      background:rgba(30,75,255,0.20);
      border:1px solid rgba(30,75,255,0.30);
      padding:12px 16px;
      border-radius:12px;
      margin-top:12px;
      font-size:14px;
      opacity:0;
      transform:translateX(-20px);
      animation:popupIn .5s forwards;
      box-shadow:0 8px 22px rgba(30,75,255,0.25);
    }

    @keyframes popupIn{
      to{ opacity:1; transform:translateX(0); }
    }

    @keyframes popupOut{
      to{ opacity:0; transform:translateX(-20px); }
    }

    /* MODALS GENERIC */
    .modal {
      display:none;
      position:fixed;
      inset:0;
      z-index:5000;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(6px);
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .modal-card{
      width:90%;
      max-width:420px;
      background: linear-gradient(180deg, #0f1550, #081033);
      border-radius:16px;
      padding:22px;
      border:1px solid rgba(30,75,255,0.08);
      box-shadow: 0 18px 60px rgba(2,8,40,0.8);
      text-align:center;
    }

    .plan-box{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:14px;
      margin:10px 0;
      border-radius:12px;
      background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
      cursor:pointer;
    }

    /* responsive tweaks */
    @media (max-width:420px){
      .logo-header{ height:48px; max-width:180px; border-radius:12px }
      .page-wrap{ margin-top:80px }
      .profile-image{ width:110px; height:110px }
    }
    @media (max-width:340px){
      .logo-header{ max-width:160px; height:44px }
      .container{ padding:16px }
      .profile-image{ width:96px; height:96px }
    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <header class="top-header" role="banner">
    <div style="display:flex;align-items:center;gap:12px">
      <img src="https://i.postimg.cc/TY7s55rJ/Chat-GPT-Image-17-de-nov-de-2025-11-51-23.png" class="logo-header" alt="Logo">
      <div style="display:flex;flex-direction:column;line-height:1;">
        <div style="font-weight:700;font-size:15px">Atendimento VIP</div>
        <div style="font-size:12px;color:rgba(255,255,255,0.75)">V√≠deo Chamada - WhatsApp</div>
      </div>
    </div>

    <div class="header-right" aria-hidden="true">
      <div class="badge" id="badgeOnline">Online</div>
    </div>
  </header>

  <!-- PAGE WRAP -->
  <div class="page-wrap">
    <div id="onlineBox">üîµ <span id="onlineNum">0</span> pessoas online agora</div>

    <main class="container" role="main" aria-labelledby="profileHeading">
      <div class="profile-image" aria-hidden="true" style="background-image:url('https://i.postimg.cc/yx37DnFC/IMG-20251010-122706-764.jpg')"></div>

      <h1 id="profileHeading" class="profile-name">Chamada De V√≠deo Whatsapp</h1>
      <p class="profile-subtitle">E ainda leve <strong>65 Fotos</strong> e <strong>48 V√≠deos</strong> de BRINDE!</p>

      <!-- Bot√£o pulsante principal -->
      <button id="btnMain" class="btn-primary" onclick="abrirModalCompra()" aria-label="Entrar na fila e pagar com PIX">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" style="width:22px;">
        FAZER CHAMADA
      </button>

      <!-- Phone inline option (shows after returning if you want) -->
      <div id="phoneSection" class="phone-section" aria-hidden="true">
        <h3 style="margin:6px 0 10px">Digite seu n√∫mero (WHATSAPP)</h3>
        <input id="phoneInput" class="phone-input" type="tel" placeholder="(11) 99999-9999" aria-label="Telefone WhatsApp">
        <button class="btn-primary" onclick="cadastrarNumero()">Cadastrar N√∫mero</button>
      </div>
    </main>
  </div>

  <!-- MODAL: Compra (abre para checkout) -->
  <div id="modalCompra" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card">
      <h2 style="margin:6px 0 10px">1 Hora De Chamada</h2>
      <p style="color:rgba(255,255,255,0.8); margin:0 0 16px">Clique abaixo para efetuar o pagamento (Pix).</p>
      <button class="btn-primary" onclick="irParaCheckout()">PAGAR NO PIX</button>
      <button onclick="fecharModalCompra()" style="margin-top:12px;background:none;border:none;color:#fff8;font-size:15px">Cancelar</button>
    </div>
  </div>

  <!-- MODAL: Confirmacao (ap√≥s cadastrar n√∫mero) -->
  <div id="modalConfirmacao" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card">
      <h2>N√∫mero cadastrado!</h2>
      <p style="color:rgba(255,255,255,0.8); margin:0 0 12px">Voc√™ ser√° chamado em breve.</p>
      <p style="margin:10px 0 8px">Sua posi√ß√£o na fila:</p>
      <div id="filaNumero" style="font-size:40px;font-weight:800;color:var(--accent-2);margin-bottom:12px">...</div>
      <button class="btn-primary" onclick="abrirModalPlanos()">Pular Fila üöÄ</button>
      <button onclick="fecharModalConfirmacao()" style="margin-top:10px;background:none;border:none;color:#fff8;font-size:15px">Fechar</button>
    </div>
  </div>

  <!-- MODAL: Planos -->
  <div id="modalPlanos" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card">
      <h2>Pular Fila</h2>
      <div class="plan-box" onclick="comprarPlano('turbo')" role="button" tabindex="0">
        <div><div style="font-weight:800">Pular 10 posi√ß√µes</div><div style="font-size:12px;color:rgba(255,255,255,0.75)">R√°pido e econ√¥mico</div></div>
        <div style="font-weight:800;color:var(--accent-2)">R$ 9,00</div>
      </div>
      <div class="plan-box" onclick="comprarPlano('ultra')" role="button" tabindex="0">
        <div><div style="font-weight:800">Pular 80 n√∫meros</div><div style="font-size:12px;color:rgba(255,255,255,0.75)">Mais visibilidade</div></div>
        <div style="font-weight:800;color:var(--accent-2)">R$ 35,00</div>
      </div>
      <div class="plan-box" onclick="comprarPlano('diamante')" role="button" tabindex="0">
        <div><div style="font-weight:800">TOPO DA FILA</div><div style="font-size:12px;color:rgba(255,255,255,0.75)">Prioridade m√°xima</div></div>
        <div style="font-weight:800;color:var(--accent-2)">R$ 120,00</div>
      </div>

      <button onclick="fecharModalPlanos()" style="margin-top:8px;background:none;border:none;color:#fff8;font-size:15px">Fechar</button>
    </div>
  </div>

  <!-- POPUPS DE COMPRA (canto inferior esquerdo) -->
  <div id="comprasPopupContainer"></div>

  <!-- POPUP CENTRAL: Pedir N√∫mero (aparece quando voltar do checkout se ainda N√ÉO cadastrou) -->
  <div id="popupNumero" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.55);backdrop-filter:blur(8px);z-index:6000;justify-content:center;align-items:center;">
    <div style="width:90%;max-width:360px;background:rgba(20,25,60,0.92);padding:25px;border-radius:18px;text-align:center;border:1px solid rgba(30,75,255,0.25);box-shadow:0 0 30px rgba(0,140,255,0.25);">
      <h2 style="margin-top:0;font-size:22px;">Quase l√°!</h2>
      <p style="color:#fff8;font-size:15px;line-height:1.4;">Para continuar, adicione seu n√∫mero para receber a chamada:</p>

      <input id="numeroCliente" type="tel" placeholder="(11) 99999-9999" style="width:100%;margin-top:12px;padding:14px;font-size:16px;border-radius:12px;border:1px solid rgba(0,140,255,0.3);background:rgba(255,255,255,0.06);color:white;outline:none;text-align:center;">

      <button onclick="salvarNumeroCliente()" class="btn-primary" style="margin-top:18px;">Confirmar N√∫mero</button>

      <button onclick="fecharPopupNumero()" style="background:none;border:none;color:#fff8;margin-top:10px;font-size:14px;">Fechar</button>
    </div>
  </div>

  <script>
    /* ===========================
       UTIL / MODAL HELPERS
       =========================== */
    function showModalId(id){
      const el = document.getElementById(id);
      if(!el) return;
      el.style.display = "flex";
      el.setAttribute('aria-hidden','false');
      // focus first actionable element
      const btn = el.querySelector('button');
      if(btn) btn.focus();
    }
    function hideModalId(id){
      const el = document.getElementById(id);
      if(!el) return;
      el.style.display = "none";
      el.setAttribute('aria-hidden','true');
    }

    function abrirModalCompra(){ showModalId('modalCompra'); }
    function fecharModalCompra(){ hideModalId('modalCompra'); }
    function abrirModalPlanos(){ hideModalId('modalConfirmacao'); showModalId('modalPlanos'); }
    function fecharModalPlanos(){ hideModalId('modalPlanos'); }
    function fecharModalConfirmacao(){ hideModalId('modalConfirmacao'); }

    /* ===========================
       CHECKOUT / RETORNO LOGIC
       =========================== */

    // Fun√ß√£o que realmente abre o checkout.
    // Marca no localStorage que foi ao checkout (voltouDoPix) e abre o checkout em nova aba.
    function irParaCheckout(){
      // marque que foi ao checkout
      try{ localStorage.setItem('voltouDoPix','sim'); } catch(e){}
      // abra o checkout em nova aba (mantendo nossa p√°gina aberta)
      window.open('https://app.pushinpay.com.br/#/service/pay/A05FFA83-F144-4CB9-911E-217FC18F1633?retorno=1', '_blank', 'noopener,noreferrer');
      // fechar modal de compra localmente
      fecharModalCompra();
    }

    // Vers√£o antiga usada por bot√µes diretos (mantida)
    function finalizarPix(){
      // marcar e abrir (caso alguns bot√µes chamem diretamente)
      try{ localStorage.setItem('voltouDoPix','sim'); } catch(e){}
      window.open('https://app.pushinpay.com.br/#/service/pay/A05FFA83-F144-4CB9-911E-217FC18F1633?retorno=1', '_blank', 'noopener,noreferrer');
    }

    // Fun√ß√£o que verifica se o usu√°rio "voltou do Pix".
    // Condi√ß√µes para abrir o popupNumero IMEDIATAMENTE (comportamento que voc√™ pediu):
    // - S√≥ abrir se o usu√°rio N√ÉO tiver j√° cadastrado um n√∫mero (localStorage 'numeroCliente' ausente)
    // - Detectar via:
    //    a) URL param ?retorno=1  (caso o checkout redirecione com esse parametro)
    //    b) Ou localStorage 'voltouDoPix' === 'sim' (quando abrimos checkout em nova aba)
    function verificarRetornoDoPixAndMostrarPopup(){
      let jaTem = null;
      try{ jaTem = localStorage.getItem('numeroCliente'); } catch(e){}
      if(jaTem && jaTem.length > 2){
        // j√° cadastrou, n√£o mostrar popup
        // opcional: mostrar phoneSection ou confirma√ß√£o r√°pida (mantido invis√≠vel para n√£o incomodar)
        return;
      }

      // check URL param
      const params = new URLSearchParams(window.location.search || location.search);
      const retornoParam = params.get('retorno');

      // check localStorage flag set before opening checkout
      let flag = null;
      try{ flag = localStorage.getItem('voltouDoPix'); } catch(e){}

      if(retornoParam === '1' || flag === 'sim'){
        // limpar flag
        try{ localStorage.removeItem('voltouDoPix'); } catch(e){}
        // abrir popup imediatamente
        abrirPopupNumero();
      }
    }

    // Run on load
    window.addEventListener('pageshow', function(){
      verificarRetornoDoPixAndMostrarPopup();
    });
    document.addEventListener('visibilitychange', function(){
      if(!document.hidden) verificarRetornoDoPixAndMostrarPopup();
    });

    /* ===========================
       SALVAR N√öMERO / FORM
       =========================== */

    function abrirPopupNumero(){ document.getElementById('popupNumero').style.display='flex'; }
    function fecharPopupNumero(){ document.getElementById('popupNumero').style.display='none'; }

    function salvarNumeroCliente(){
      const el = document.getElementById('numeroCliente');
      if(!el) return;
      const numero = el.value.trim();
      // valida√ß√µes simples (m√≠nimo 9 caracteres de d√≠gitos)
      const digitos = numero.replace(/\D/g,'');
      if(digitos.length < 9){
        alert('Digite um n√∫mero v√°lido (ex: (11) 99999-9999).');
        return;
      }
      try{ localStorage.setItem('numeroCliente', numero); } catch(e){}
      fecharPopupNumero();
      // exibir confirma√ß√£o modal
      document.getElementById('filaNumero').textContent = Math.floor(Math.random()*1000)+1;
      showModalId('modalConfirmacao');
    }

    // fun√ß√£o chamada pelo bot√£o "Cadastrar N√∫mero" inline (phoneSection)
    function cadastrarNumero(){
      const el = document.getElementById('phoneInput');
      if(!el) return alert('Digite seu n√∫mero!');
      const numero = el.value.trim();
      const digitos = numero.replace(/\D/g,'');
      if(digitos.length < 9){
        alert('Digite um n√∫mero v√°lido.');
        return;
      }
      try{ localStorage.setItem('numeroCliente', numero); } catch(e){}
      document.getElementById('filaNumero').textContent = Math.floor(Math.random()*1000)+1;
      showModalId('modalConfirmacao');
    }

    /* ===========================
       PLANO REDIRECIONAMENTO
       =========================== */
    function comprarPlano(plano){
      const urls = {
        "turbo": "https://app.pushinpay.com.br/#/service/pay/A060EABC-B802-4DB7-A486-9CE2A857590E",
        "ultra": "https://app.pushinpay.com.br/#/service/pay/A060EBA7-8875-4996-929F-1070D3CD4A3E",
        "diamante": "https://app.pushinpay.com.br/#/service/pay/A060EC30-269F-472F-95D3-A9B576132828"
      };
      try{ localStorage.setItem('voltouDoPix','sim'); } catch(e){}
      window.open(urls[plano] + '?retorno=1', '_blank', 'noopener,noreferrer');
    }

    /* ===========================
       ONLINE COUNTER (realista)
       =========================== */
    function gerarOnline(){
      const online = Math.floor(Math.random()*60)+20; // 20-79
      document.getElementById('onlineNum').textContent = online;
    }
    setInterval(gerarOnline, 5000);
    gerarOnline();

    /* ===========================
       POPUPS ALEAT√ìRIOS DE COMPRA
       =========================== */
    const nomesBrasileiros = [
      "Jo√£o Pedro", "Gabriel Souza", "Lucas Almeida", "Felipe Martins",
      "Mateus Silva", "Rafael Ribeiro", "Gustavo Oliveira", "Bruno Fernandes",
      "Daniel Costa", "Thiago Duarte", "Leonardo Mendes", "Caio Andrade",
      "Henrique Lopes", "Diego Barbosa", "Eduardo Santos", "Andr√© Monteiro",
      "Murilo Rocha", "Ot√°vio Nunes", "Samuel Freitas", "Victor Azevedo",
      "Alexandre Peixoto", "Igor Cardoso", "Jonathan Vieira", "Marcelo Lima"
    ];

    function gerarCompraAleatoria(){
      const nome = nomesBrasileiros[Math.floor(Math.random()*nomesBrasileiros.length)];
      const container = document.getElementById("comprasPopupContainer");
      if(!container) return;
      const popup = document.createElement("div");
      popup.className = "compra-popup";
      popup.innerText = `${nome} acabou de comprar üî•`;
      container.appendChild(popup);
      // remove depois de 5s
      setTimeout(()=>{
        popup.style.animation = "popupOut .5s forwards";
        setTimeout(()=> popup.remove(), 500);
      }, 5000);
    }
    setInterval(gerarCompraAleatoria, 12000);
    setTimeout(gerarCompraAleatoria, 4000);

    /* ===========================
       PHONE MASK (inline)
       =========================== */
    (function(){
      const input = document.getElementById("phoneInput");
      if(!input) return;
      input.addEventListener("input", function(e){
        let v = e.target.value.replace(/\D/g, "");
        if (v.length > 11) v = v.slice(0,11);
        if (v.length >= 11) v = v.replace(/(\d{2})(\d{5})(\d{4})/, "($1) $2-$3");
        else if (v.length >= 7) v = v.replace(/(\d{2})(\d{4})(\d{0,4})/, "($1) $2-$3");
        else if (v.length >= 3) v = v.replace(/(\d{2})(\d{0,5})/, "($1) $2");
        e.target.value = v;
      });
    })();

    /* ===========================
       ACCESSIBILIDADE / FECHAR COM ESC / CLICK OUTSIDE
       =========================== */
    document.addEventListener('keydown', function(e){
      if(e.key === 'Escape'){
        ['modalCompra','modalConfirmacao','modalPlanos'].forEach(id=>{
          const el = document.getElementById(id);
          if(el) el.style.display='none';
        });
        // also popupNumero
        document.getElementById('popupNumero').style.display='none';
      }
    });

    // clicar fora dos modais fecha
    document.querySelectorAll('.modal').forEach(function(m){
      m.addEventListener('click', function(ev){
        if(ev.target === m) m.style.display='none';
      });
    });

    /* ===========================
       Behavior on initial load: also check retorno flag immediately
       =========================== */
    window.addEventListener('load', function(){
      // show popupNumero immediately if returning & number not set (per your choice: IMEDIATO)
      verificarRetornoDoPixAndMostrarPopup();
    });

    // pageshow / visibilitychange also handled above
  </script>
</body>
</html>
